{% extends 'inicio/base_arrendatario.html' %}
{% block titulo %}Mis contratos{% endblock %}

{% block contenido %}
<h1 class="text-2xl font-bold mb-6 text-gradient">Mi contrato</h1>

{% if contratos %}
  <div class="space-y-6">
    {% for c in contratos %}
      <div class="bg-gray-900/70 rounded-lg border border-white/10 shadow-lg overflow-hidden">
        <div class="px-4 py-3 bg-white/5 text-gray-300 uppercase tracking-wide text-xs">
          Contrato #{{ c.id }}
        </div>
        <div class="p-4 space-y-2">
          <p class="text-lg font-semibold text-white">
            {{ c.numero_departamento }} — {{ c.arrendatario }}
          </p>
          <p class="text-sm text-gray-400">
            Inicio: {{ c.fecha_inicio|date:"d/m/Y" }}
            • Fin: {{ c.fecha_fin|date:"d/m/Y" }}
          </p>
          {% if c.tarifa_mensual %}
            <p class="text-sm text-gray-400">
              Tarifa mensual: ${{ c.tarifa_mensual|floatformat:2 }}
            </p>
          {% endif %}
          <p class="text-sm">
            Estado:
            {% if c.estado == 'activo' %}
              <span class="px-2 py-1 text-xs rounded-full bg-green-500/20 text-green-300 font-medium">Activo</span>
            {% elif c.estado == 'finalizado' %}
              <span class="px-2 py-1 text-xs rounded-full bg-red-500/20 text-red-300 font-medium">Finalizado</span>
            {% else %}
              <span class="px-2 py-1 text-xs rounded-full bg-yellow-500/20 text-yellow-300 font-medium">{{ c.estado|capfirst }}</span>
            {% endif %}
          </p>
          <div class="pt-2 flex gap-2">
            <a href="{% url 'contrato_pdf' c.id %}"
               class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm">
               Descargar PDF
            </a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p class="text-gray-400 italic">No tienes contratos registrados.</p>
{% endif %}
{% endblock %}
