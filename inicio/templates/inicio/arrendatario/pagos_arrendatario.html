{% extends 'inicio/base_arrendatario.html' %}
{% block titulo %}Mis pagos{% endblock %}

{% block contenido %}
<div class="space-y-6 animate-fade-in">
  <h1 class="text-2xl font-bold text-gradient">Mis pagos</h1>

  <p class="text-lg text-gray-200 font-semibold">
    La cuenta a la que debe depositar es la que ya se socializó al momento de firmar el contrato.
  </p>

  <div class="bg-gray-900/70 rounded-lg border border-white/10 shadow-lg overflow-hidden">
    <table class="w-full text-sm">
      <thead class="bg-white/5 text-gray-300 uppercase tracking-wide text-xs">
        <tr>
          <th class="px-4 py-3 text-left">Periodo</th>
          <th class="px-4 py-3 text-left">Fecha Venc.</th>
          <th class="px-4 py-3 text-left">Monto</th>
          <th class="px-4 py-3 text-left">Estado</th>
          <th class="px-4 py-3 text-left">Comprobante</th>
          <th class="px-4 py-3 text-center">Acciones</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-white/5">
        {% for pago in pagos %}
        <tr class="hover:bg-white/5 transition-colors">
          <td class="px-4 py-3 text-gray-200">{{ pago.periodo }}</td>
          <td class="px-4 py-3 text-gray-200">{{ pago.fecha_vencimiento|date:"d/m/Y" }}</td>
          <td class="px-4 py-3 text-gray-200">${{ pago.monto }}</td>
          <td class="px-4 py-3 text-gray-200">{{ pago.get_estado_display }}</td>


          <td class="px-4 py-3 text-gray-200">
            {% if pago.comprobante %}
              <a href="{{ pago.comprobante.url }}" target="_blank" class="text-blue-400 hover:underline">Ver</a>
            {% else %}
              <span class="text-gray-500">—</span>
            {% endif %}
          </td>
          <td class="px-4 py-3 text-center">
            {% if not pago.comprobante %}
              <a href="{% url 'subir_comprobante_arrendatario' pago.id %}"
                 class="px-3 py-1 text-xs rounded bg-pink-600 hover:bg-pink-500 text-white">
                 Subir comprobante
              </a>
            {% else %}

              <a href="{% url 'subir_comprobante_arrendatario' pago.id %}"
                 class="px-3 py-1 text-xs rounded bg-yellow-600 hover:bg-yellow-500 text-white">
                 Reemplazar comprobante
              </a>

            {% endif %}
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="px-4 py-6 text-center text-gray-400">
            No tienes pagos registrados.
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
